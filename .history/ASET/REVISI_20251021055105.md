# Revisi Website Organisasi

## 1. Anggota
- **Tambah data secara lengkap**: DONE
- **Lihat data**: DONE
- **Edit data**: Masih ada kekurangan. Ketika mengganti foto, foto lama di penyimpanan tidak terganti. Diinginkan: ketika update foto, foto lama bisa diganti berdasarkan ID anggota (karena ID unik).
- **Hapus data**: DONE

## 2. Rapat
- **Tambah rapat**: DONE
- **Lihat rapat**: DONE
- **Edit rapat**: DONE, namun ketika menambahkan notulen terjadi error. Perlu diperbaiki agar tidak error saat menambahkan notulen.
- **Hapus rapat**: DONE, namun ketika menghapus data rapat, data notulen juga terhapus dari database, tetapi file di public/storage/notulen tidak ikut terhapus. Perlu diperbaiki agar file notulen juga terhapus saat menghapus rapat.

## 3. Program Kerja
- **Tambah**: DONE
- **Lihat**: DONE
- **Edit**: DONE, namun ketika menambahkan notulen gagal. Perlu diperbaiki agar tidak gagal saat menambahkan notulen.
- **Hapus**: DONE, namun ketika menghapus data program kerja yang memiliki notulen dan evaluasi, terjadi error. Perlu diperbaiki agar tidak error saat menghapus.

Di program kerja ada beberapa masalah yang masih belum diperbaiki:
1. Ketika admin menambah data tanpa menyertakan notulen dan evaluasi, kemudian menyimpan, lalu edit untuk menambahkan notulen dan evaluasi, namun gagal.
2. Ketika admin menambah data dengan menyertakan notulen dan evaluasi, bisa; namun ketika edit dan ganti notulen/evaluasi, akan gagal.
3. Program kerja seharusnya juga ter-relasi dengan dokumentasi.

## 4. Notulen
- **Tambah**: Masih ada kekurangan. Pada dropdown rapat, data rapat tidak muncul (kosong). Ketika upload file, filenya tidak di-rename; harusnya di-rename sesuai judul notulen. Ketika menambah data disertai file, file tersimpan di dua tempat: public/storage/notulen dan storage/public/evaluasi. Hapus penyimpanan ke storage/public/notulen.
- **Lihat**: DONE
- **Edit**: DONE
- **Hapus**: DONE
Namun di halaman index dan detail rapat, notulen tidak muncul karena relasi dengan rapat belum benar. Perlu diperbaiki agar notulen muncul di halaman rapat.

## 5. Evaluasi
- **Tambah**: DONE, namun ketika menambah data disertai file, file tersimpan di dua tempat: public/storage/evaluasi dan storage/public/evaluasi. Hapus penyimpanan ke storage/public/evaluasi.
- **Lihat**: DONE
- **Edit**: DONE
- **Hapus**: DONE

## 6. Dokumentasi
- **Tambah**: DONE, namun di halaman index foto tidak terlihat dan file tidak tersimpan di public/storage/dokumentasi. Perlu diperbaiki agar foto tersimpan dan terlihat di index.
- **Lihat**: DONE, namun tidak bisa melihat foto karena foto tidak tersimpan. Perlu diperbaiki agar foto tersimpan dan bisa dilihat.
- **Edit**: DONE, namun foto baru tidak tersimpan, dan tidak diketahui apakah file lama di public/storage/dokumentasi akan terhapus saat edit. Perlu diperbaiki agar foto baru tersimpan dan file lama terhapus.
- **Hapus**: DONE, namun tidak diketahui apakah file di public/storage/dokumentasi akan terhapus saat hapus data. Perlu diperbaiki agar file foto terhapus saat data dokumentasi dihapus.

## 7. Kontak
- **Tambah**: DONE
- **Edit**: DONE

# Alur yang Diharapkan

ADMIN -> masuk di halaman dashboard -> melihat ringkasan laporan seperti jumlah data dari masing-masing tabel

-> masuk ke halaman anggota
-> menambah data anggota -> memasukkan data: id (otomatis dibuat dan read-only), nama (input), kelas (dropdown dengan pilihan seperti X PPLG 2), jabatan (dropdown dengan pilihan seperti Ketua, Wakil Ketua, Sekretaris, dll.), kontak (input), foto (upload foto, tersimpan di public/storage/uploads/anggota dengan format: timestamp_id_nama.jpg, contoh: 16272_agt001_ali.jpg) -> simpan data ke database -> muncul alert pemberitahuan data tersimpan
-> melihat data dengan klik tombol lihat -> muncul popup modal informasi -> menampilkan data anggota lengkap -> klik close untuk menutup popup
-> mengedit dengan klik tombol edit -> tampilan seperti halaman tambah data -> semua data bisa diedit kecuali id -> ketika mengganti foto, foto lama terhapus -> update data tersimpan -> muncul alert konfirmasi update
-> menghapus dengan klik tombol hapus -> semua data terhapus termasuk foto yang tersimpan -> muncul alert konfirmasi hapus

-> masuk ke halaman Rapat
-> menambah data rapat -> memasukkan data: id (otomatis dibuat dan read-only), judul (input), tanggal (pilih), tempat (input), status (pilih dari 3 pilihan: Belum, Berlangsung, Selesai) -> ada dropdown untuk memilih notulen dan dokumentasi (data dari relasi tabel notulen dan dokumentasi, tidak wajib diisi saat create) -> simpan data -> muncul alert data tersimpan ke database
-> melihat data -> muncul popup modal informasi -> menampilkan data rapat lengkap termasuk notulen (file) dan dokumentasi (foto) -> Kembali
-> mengedit -> tampilan seperti halaman create -> bisa memilih notulen dan dokumentasi -> update data -> muncul alert konfirmasi update
-> menghapus data -> data rapat terhapus, tetapi file notulen dan dokumentasi tidak terhapus -> muncul alert konfirmasi

-> masuk ke halaman program kerja
-> menambah data -> memasukkan data: id (otomatis dibuat dan read-only), nama program (input), deskripsi (input), penanggung jawab (dropdown dari nama anggota yang ter-relasi), status (dropdown 3 pilihan: Belum, Berlangsung, Selesai), tab evaluasi (dropdown untuk memilih evaluasi dari data ter-relasi), tab dokumentasi (dropdown untuk memilih dokumentasi dari data ter-relasi) -> simpan data -> muncul alert data tersimpan
-> lihat data program kerja -> muncul tampilan detail data termasuk file evaluasi dan dokumentasi -> Kembali
-> edit data -> tampilan seperti halaman create -> bisa edit semua kecuali id, termasuk memilih/ganti evaluasi dan dokumentasi -> simpan data -> muncul alert konfirmasi
-> hapus data -> semua data terhapus kecuali file evaluasi dan dokumentasi -> muncul alert konfirmasi

-> masuk halaman notulen
-> tambah data -> mengisi: judul (input), isi notulen (input, tidak wajib), tanggal, penulis (dropdown dari nama anggota ter-relasi), rapat (dropdown dari nama rapat ter-relasi), upload file (upload file PDF/DOCX/Excel, tersimpan di public/storage/notulen, otomatis rename sesuai judul notulen) -> simpan data -> muncul alert data tersimpan
-> lihat data -> muncul popup modal informasi -> menampilkan detail notulen termasuk file -> Kembali
-> edit data -> bisa edit semua data termasuk file kecuali id -> file lama terhapus dan diganti baru -> update data -> muncul alert konfirmasi
-> hapus data -> semua data terhapus termasuk file di public/storage/notulen -> muncul alert konfirmasi

-> masuk halaman evaluasi
-> tambah data -> mengisi: program kerja (dropdown dari nama program kerja ter-relasi), judul evaluasi (input), isi evaluasi (input), tanggal evaluasi (input), penulis (dropdown dari nama anggota ter-relasi), upload file (upload file PDF/DOCX/Excel, tersimpan di public/storage/evaluasi, otomatis rename sesuai judul evaluasi) -> simpan data -> muncul alert pemberitahuan
-> lihat data -> muncul popup modal informasi -> menampilkan data evaluasi lengkap termasuk file -> Kembali
-> edit data -> bisa edit semua data termasuk file kecuali id -> file lama terhapus dan diganti baru -> update data -> muncul alert konfirmasi
-> hapus data -> semua data terhapus termasuk file di public/storage/evaluasi -> muncul alert konfirmasi

-> masuk halaman dokumentasi
-> tambah data -> mengisi: judul (input), deskripsi (input), tanggal (input), kategori (dropdown pilihan: rapat, program kerja, dll.), upload foto (upload foto, tersimpan di public/storage/dokumentasi, otomatis rename sesuai judul) -> simpan data -> muncul alert
-> lihat data -> muncul popup modal informasi -> menampilkan data dokumentasi lengkap dan foto terlihat jelas -> Kembali
-> edit data -> bisa edit semua data termasuk foto kecuali id -> file lama terhapus dan diganti baru -> update data -> muncul alert konfirmasi
-> hapus data -> semua data terhapus termasuk file di public/storage/dokumentasi -> muncul alert konfirmasi

-> masuk halaman kontak
-> mengelola pesan masuk dari user
  -> membalas
  -> menghapus
-> mengelola link media sosial


# ⚙️ PROJECT AUDIT & DEVELOPMENT PROMPT

## KONTEKS
Saya sedang mengembangkan sistem manajemen organisasi berbasis Laravel.  
Pastikan untuk melakukan AUDIT menyeluruh pada setiap halaman berikut:
- Validasi relasi antar tabel
- Konsistensi format penyimpanan file
- Proses CRUD (Create, Read, Update, Delete)
- Penghapusan file lama saat update
- Struktur folder di public/storage
- Naming file otomatis sesuai aturan
- Keamanan input & validasi form
- Respons alert dan modal popup berjalan normal

Setiap bagian wajib dites fungsionalnya seperti: create, view (modal), edit, delete.

---

## 1️⃣ HALAMAN ANGGOTA
- Admin masuk halaman anggota.
- Tambah data anggota:
  - ID otomatis dibuat (read-only).
  - Nama (input text).
  - Kelas (dropdown berisi pilihan seperti `X PPLG 2`).
  - Jabatan (dropdown: Ketua, Wakil Ketua, Sekretaris, dll).
  - Kontak (input text).
  - Foto (upload dan tersimpan di `public/storage/uploads/anggota`).
  - Format nama file: `timestamp_id(nomor)_nama(lowercase).jpg`
    Contoh: `16272_agt001_ali.jpg`
  - Simpan → alert pemberitahuan data tersimpan.
- Lihat data → tampil di modal popup (lengkap).
- Edit data → semua data bisa diedit kecuali ID.
  - Jika foto diganti → foto lama otomatis terhapus.
  - Update → alert konfirmasi update berhasil.
- Hapus data → data dan foto dihapus → alert konfirmasi delete.

Audit:
- Pastikan validasi input dan file berjalan baik.
- Pastikan relasi dengan tabel lain tidak rusak.

---

## 2️⃣ HALAMAN RAPAT
- Tambah rapat:
  - ID otomatis.
  - Judul (input).
  - Tanggal (date picker).
  - Tempat (input).
  - Status (dropdown: Belum, Berlangsung, Selesai).
  - Pilih Notulen dan Dokumentasi (dropdown dari relasi tabel terkait, opsional).
  - Simpan → alert tersimpan.
- Lihat data → modal popup menampilkan detail lengkap termasuk file notulen & dokumentasi.
- Edit data → semua bisa diubah.
- Hapus data → data rapat terhapus, tetapi file notulen & dokumentasi **tidak ikut terhapus**.

Audit:
- Pastikan relasi foreign key ke tabel notulen & dokumentasi tidak broken.
- Cek dropdown terisi data benar.

---

## 3️⃣ HALAMAN PROGRAM KERJA
- Tambah data:
  - ID otomatis.
  - Nama program.
  - Deskripsi.
  - Penanggung jawab (dropdown anggota).
  - Status (dropdown: Belum, Berlangsung, Selesai).
  - Tab Evaluasi → dropdown relasi ke tabel evaluasi.
  - Tab Dokumentasi → dropdown relasi ke tabel dokumentasi.
  - Simpan → alert tersimpan.
- Lihat → tampil detail lengkap + file evaluasi & dokumentasi.
- Edit → semua data bisa diubah kecuali ID.
- Hapus → data program kerja terhapus tapi file evaluasi & dokumentasi **tidak ikut terhapus**.

Audit:
- Validasi relasi program kerja ↔ anggota ↔ evaluasi ↔ dokumentasi.
- Pastikan foreign key cascade diatur dengan benar.

---

## 4️⃣ HALAMAN NOTULEN
- Tambah notulen:
  - Judul (input).
  - Isi (textarea, opsional).
  - Tanggal.
  - Penulis (dropdown dari anggota).
  - Rapat (dropdown dari tabel rapat).
  - Upload file (pdf/docx/xlsx) tersimpan di `public/storage/notulen`.
  - File otomatis rename sesuai judul (misal: `notulen_rapat_pplg.pdf`).
  - Simpan → alert konfirmasi.
- Lihat data → modal detail menampilkan isi dan file.
- Edit → file lama terhapus, file baru disimpan.
- Hapus → data dan file ikut terhapus.

Audit:
- Pastikan relasi penulis dan rapat valid.
- Pastikan file lama terhapus otomatis sebelum upload baru.

---

## 5️⃣ HALAMAN EVALUASI
- Tambah evaluasi:
  - Program kerja (dropdown relasi).
  - Judul evaluasi.
  - Isi evaluasi.
  - Tanggal evaluasi.
  - Penulis (dropdown dari anggota).
  - Upload file (pdf/docx/xlsx), tersimpan di `public/storage/evaluasi`.
  - File otomatis rename sesuai judul.
  - Simpan → alert konfirmasi.
- Lihat → modal menampilkan isi & file.
- Edit → file lama otomatis terhapus dan terganti.
- Hapus → data & file ikut terhapus.

Audit:
- Relasi ke program kerja dan anggota berjalan.
- Validasi file upload & penghapusan benar.

---

## 6️⃣ HALAMAN DOKUMENTASI
- Tambah dokumentasi:
  - Judul.
  - Deskripsi.
  - Tanggal.
  - Kategori (dropdown: Rapat, Program Kerja, Lainnya).
  - Upload foto (tersimpan di `public/storage/dokumentasi`).
  - Foto otomatis rename sesuai judul + format unik (timestamp atau UUID).
  - Simpan → alert konfirmasi.
- Lihat → modal detail menampilkan deskripsi dan foto.
- Edit → semua data bisa diubah.
  - Jika foto baru diunggah → foto lama terhapus otomatis.
- Hapus → data & foto dihapus → alert konfirmasi.

Audit:
- Pastikan foto rename sesuai aturan.
- Pastikan path dan file deletion berfungsi sempurna.

---

## 7️⃣ HALAMAN KONTAK
- Kelola pesan masuk:
  - Balas pesan.
  - Hapus pesan → alert konfirmasi.
- Kelola link media sosial (CRUD dasar).

Audit:
- Pastikan validasi form & keamanan input (XSS, SQL Injection).
- Cek semua fungsi CRUD berjalan baik.

---

## 🧩 PANDUAN UNTUK BLACKBOX
1. Audit dan koreksi setiap halaman sesuai deskripsi di atas.
2. Terapkan upload & delete file otomatis.
3. Pastikan naming file mengikuti aturan.
4. Relasi antar tabel wajib diperiksa.
5. Validasi input dan alert konfirmasi harus berfungsi di semua halaman.
6. Struktur folder & path public/storage diperiksa.
7. Tidak boleh ada file lama tertinggal setelah update.
8. Tes end-to-end dari dashboard → semua modul.

# Penghapusan & Pengeditan Migration

1. Hapus 
  - 2025_10_16_080443_add_program_id_to_notulen_table.php
  - 2025_10_17_102013_add_reply_to_kontak_table.php
  - 2025_10_17_102033_add_reply_to_kontak_table.php
  - 2025_10_18_071728_add_rapat_id_to_dokumentasi_table.php

2. Edit 
  - 2025_09_30_065005_create_notulen_table.php
  - 2025_09_30_065136_create_kontak_table.php
  - 2025_09_30_065111_create_dokumentasi_table.php

3. Keterangan
  - hapus yang ada di bagian hapus dan edit